<body>
    <div class="container">
      <textarea placeholder="Enter your prompt here..."></textarea>
      <button class="btn">Generate</button>
      <div class="loader"></div>
      <div class="output"></div>
    </div>

    <script src="https://js.puter.com/v2/"></script>
    <script>
      const btn = document.querySelector(".btn");
      const output = document.querySelector(".output");
      const loader = document.querySelector(".loader");
      const textarea = document.querySelector("textarea");

      btn.addEventListener("click", async () => {
        try {
          const text = textarea.value.trim();
          if (!text) return;

          output.innerHTML = '';
          loader.style.display = 'block';
          btn.style.opacity = '0.7';
          btn.style.pointerEvents = 'none';

          // Исправлено указание модели согласно документации
          const resp = await puter.ai.chat(text, { 
            model: "o1-mini", // Правильное имя модели из списка доступных
            stream: true 
          });
          
          let result = '';
          for await (const part of resp) {
            if (part?.text) {
              result += part.text;
              output.textContent = result;
              output.scrollTop = output.scrollHeight;
            }
          }
        } catch (error) {
          output.textContent = `Error: ${error.message}`;
        } finally {
          loader.style.display = 'none';
          btn.style.opacity = '1';
          btn.style.pointerEvents = 'all';
        }
      });
    </script>
  </body>
